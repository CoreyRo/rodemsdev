language: node_js
node_js: stable

# safelist
branches:
  only:
  - master

cache:
  yarn: true
  directories:
    - $TRAVIS_BUILD_DIR/source/rodemsdev.ui/build
    - $TRAVIS_BUILD_DIR/source/rodemsdev.ui/node_modules

script: 
  - cd $TRAVIS_BUILD_DIR/source/rodemsdev.ui 
  - yarn
  - yarn test

deploy:
# Use Github pages deploy process
provider: pages
# Keep builded pages
skip-cleanup: true
# Directory where your generated files are located
local_dir: $TRAVIS_BUILD_DIR/source/rodemsdev.ui/build
# Github security/auth token
github-token: $GITHUB_TOKEN
# Incremental commit to keep old build/files from previous deployments
keep-history: true
# Git branch on which it should deploy (master, gh-pages, foo...)
target_branch: gh-pages
on:
  # Which branch on commit/push will trigger deployment
  branch: master